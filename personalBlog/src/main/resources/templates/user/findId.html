<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>ì•„ì´ë”” ì°¾ê¸°</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/style.css" rel="stylesheet"> <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>

<header class="blog-header" onclick="location.href='/'" style="cursor: pointer;">
    <h1 class="blog-title">My Coding Life</h1>
    <p class="blog-subtitle">ì†Œì†Œí•œ ì¼ìƒê³¼ ê°œë°œ ê¸°ë¡ì„ ë‚¨ê¸°ëŠ” ê³µê°„</p>
</header>

<div class="container main-box" style="max-width: 500px; margin-top: 50px;">
    <div class="login-card">
        
        <div class="text-center mb-4">
            <h3 class="fw-bold" style="color: #4a4a4a;">ğŸ” ì•„ì´ë”” ì°¾ê¸°</h3>
            <p class="text-muted small">ê°€ì… ì‹œ ë“±ë¡í•œ ë‹‰ë„¤ì„ì„ ì…ë ¥í•˜ì„¸ìš”.</p>
        </div>

        <form>
            <div class="mb-4">
                <label class="form-label fw-bold small">ë‹‰ë„¤ì„</label>
                <input type="text" id="nickname" class="form-control" placeholder="ë‹‰ë„¤ì„ ì…ë ¥ (ì˜ˆ: í™ê¸¸ë™)">
            </div>

            <div class="d-grid gap-2">
                <button type="button" onclick="findId()" class="btn btn-brown">ì•„ì´ë”” ì°¾ê¸°</button>
                <a href="/auth/loginForm" class="btn btn-outline-secondary rounded-pill py-2">ë¡œê·¸ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°</a>
            </div>
        </form>
        
        <div id="result-box" class="alert alert-warning mt-4 d-none text-center">
            <p class="mb-1 small">íšŒì›ë‹˜ì˜ ì•„ì´ë””ëŠ”:</p>
            <h4 class="fw-bold" style="color: #5a4a42;" id="found-id-text"></h4>
        </div>

    </div>
</div>

<script>
    function findId() {
        let nickname = $("#nickname").val();

        if(!nickname) {
            alert("ë‹‰ë„¤ì„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            return;
        }

        $.ajax({
            type: "POST",
            url: "/auth/find-id",
            data: JSON.stringify({nickname: nickname}), // ë‹‰ë„¤ì„ë§Œ JSONìœ¼ë¡œ ì „ì†¡
            contentType: "application/json; charset=utf-8",
            dataType: "json"
        }).done(function(resp) {
            // ì„±ê³µ ì‹œ ê²°ê³¼ì°½ ë³´ì—¬ì£¼ê¸°
            $("#result-box").removeClass("d-none");
            $("#found-id-text").text(resp.data);
        }).fail(function(error) {
            // ì‹¤íŒ¨ ì‹œ ì—ëŸ¬ ë©”ì‹œì§€ ë„ìš°ê¸°
            if(error.responseJSON && error.responseJSON.data) {
                alert(error.responseJSON.data);
            } else {
                alert("ì•„ì´ë”” ì°¾ê¸° ì‹¤íŒ¨");
            }
        });
    }
</script>

</body>
</html>